{"version":3,"sources":["App.js","index.js"],"names":["rtc","client","localAudioTrack","localVideoTrack","options","App","useEffect","a","AgoraRTC","createClient","mode","codec","join","createMicrophoneAudioTrack","createCameraVideoTrack","publish","play","on","user","mediaType","subscribe","console","log","remoteVideoTrack","videoTrack","PlayerContainer","React","createElement","id","uid","className","ReactDOM","render","document","getElementById","audioTrack","remove","StrictMode"],"mappings":"8NAKMA,EAAM,CACVC,OAAQ,KACRC,gBAAiB,KACjBC,gBAAiB,MAGbC,EACG,mCADHA,EAGG,KAwEMC,MAzDf,WAiDE,OAhDAC,qBACE,wCAAM,sBAAAC,EAAA,6DACJP,EAAIC,OAASO,IAASC,aAAa,CAAEC,KAAM,OAAQC,MAAO,SADtD,SAEcX,EAAIC,OAAOW,KAC3BR,EACA,OACAA,EACA,MANE,8BAQwBI,IAASK,6BARjC,cAQJb,EAAIE,gBARA,gBASwBM,IAASM,yBATjC,cASJd,EAAIG,gBATA,iBAUEH,EAAIC,OAAOc,QAAQ,CAACf,EAAIE,gBAAiBF,EAAIG,kBAV/C,QAYJH,EAAIG,gBAAgBa,KAAK,gBAEzBhB,EAAIC,OAAOgB,GAAG,iBAAd,uCAAgC,WAAOC,EAAMC,GAAb,iBAAAZ,EAAA,sEACxBP,EAAIC,OAAOmB,UAAUF,GADG,OAE9BG,QAAQC,IAAI,qBAEM,UAAdH,GAAuC,QAAdA,IACrBI,EAAmBL,EAAKM,WACxBC,EAAkBC,IAAMC,cAAc,MAAO,CACjDC,GAAIV,EAAKW,IACTC,UAAW,WAEbC,IAASC,OACPP,EACAQ,SAASC,eAAe,kBAE1BX,EAAiBP,KAAjB,UAAyBE,EAAKW,OAGd,UAAdV,GAAuC,QAAdA,GACFD,EAAKiB,WACbnB,OAGnBhB,EAAIC,OAAOgB,GAAG,oBAAoB,SAACC,GACTe,SAASC,eAAehB,EAAKW,KACrCO,YAxBY,2CAAhC,yDA4BAf,QAAQC,IAAI,oBA1CR,8CA4CN,IAIA,yBAAKQ,UAAU,aACb,yBAAKF,GAAG,eAAeE,UAAU,wBACjC,yBAAKF,GAAG,gBAAgBE,UAAU,2BC7ExCC,IAASC,OACP,kBAAC,IAAMK,WAAP,KACE,kBAAC,EAAD,OAEFJ,SAASC,eAAe,U","file":"static/js/main.843d6ddc.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport './App.css';\nimport AgoraRTC from 'agora-rtc-sdk-ng';\n\nconst rtc = {\n  client: null,\n  localAudioTrack: null,\n  localVideoTrack: null,\n};\n\nconst options = {\n  appId: '8131e8a4b04c4641b5224fa2b3bbb352',\n  channel: 'demo_channel_name',\n  token: null,\n};\n\nasync function leaveCall() {\n  rtc.localAudioTrack.close();\n  rtc.localVideoTrack.close();\n\n  rtc.client.remoteUsers.forEach((user) => {\n    const playerContainer = document.getElementById(user.uid);\n    playerContainer && playerContainer.remove();\n  });\n  await rtc.client.leave();\n  window.location = '/';\n}\n\nfunction App() {\n  useEffect(\n    () => async () => {\n      rtc.client = AgoraRTC.createClient({ mode: 'live', codec: 'h264' });\n      const uid = await rtc.client.join(\n        options.appId,\n        'test',\n        options.token,\n        null\n      );\n      rtc.localAudioTrack = await AgoraRTC.createMicrophoneAudioTrack();\n      rtc.localVideoTrack = await AgoraRTC.createCameraVideoTrack();\n      await rtc.client.publish([rtc.localAudioTrack, rtc.localVideoTrack]);\n\n      rtc.localVideoTrack.play('local-stream');\n\n      rtc.client.on('user-published', async (user, mediaType) => {\n        await rtc.client.subscribe(user);\n        console.log('subscribe success');\n\n        if (mediaType === 'video' || mediaType === 'all') {\n          const remoteVideoTrack = user.videoTrack;\n          const PlayerContainer = React.createElement('div', {\n            id: user.uid,\n            className: 'stream',\n          });\n          ReactDOM.render(\n            PlayerContainer,\n            document.getElementById('remote-stream')\n          );\n          remoteVideoTrack.play(`${user.uid}`);\n        }\n\n        if (mediaType === 'audio' || mediaType === 'all') {\n          const remoteAudioTrack = user.audioTrack;\n          remoteAudioTrack.play();\n        }\n\n        rtc.client.on('user-unpublished', (user) => {\n          const playerContainer = document.getElementById(user.uid);\n          playerContainer.remove();\n        });\n      });\n\n      console.log('publish success!');\n    },\n    []\n  );\n\n  return (\n    <div className='container'>\n      <div id='local-stream' className='stream local-stream'></div>\n      <div id='remote-stream' className='stream remote-stream'></div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}